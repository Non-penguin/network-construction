//脳死で覚えるipv4設計//

--目的--
とりあえずネットワークに関するテストを乗り切りたい人向け
忙しい人むけ

--前提知識--
二進数できる人
なんとなく、サブネットマスクの概念を知っている人
なんとなく、CIDR表記を知っている人

!!注意!!
実践的ではあるが、とりあえずテストをパスしたい、なんとなく理解したい人むけ

具体例中心に解説

例題：スケール10.10.0.0/16のネットワークを、Factory(3000hosts)、Office(1000hosts)、Lab(120hosts)、Link(2hosts)に分割する。
Scale:10.10.0.0/16
Factory:3000
Office:1000
Lab:120
Link:2(二拠点間)

1. Factoryのサブネット設計
要件：3000hosts
　　↓
2^n-2≥3000 #ホスト部で2のn乗-2が必要 #マイナス２はネットワークアドレス(ex:1111.1111.0000.0000)とブロードキャストアドレス(ex:xxxx.xxxx.1111.1111)の分
2^n≥3002
n=12(2^12=4096)
サブネットマスクは、32-12=20で/20で設計すればいい
なのでネットワークアドレスは10.10.0.0/20 #ネットワークアドレスは、そのネットワークを表すアドレス(固定)



# ブロードキャストアドレスの計算:
# (1) 正攻法: ホスト部のビット(32-20=12bit)を全て1にする。
#     10.10.00001111.11111111 -> 10.10.15.255
# (2) 暗算テク（ブロックサイズから計算）:
# /20は第3オクテット(24bit)までの範囲なので、24-20=4。2^4=16が第3オクテットのブロックサイズ。
# ネットワークアドレスは0から始まり、16ずつ増える(0, 16, 32..)。
# よって10.10.0.0の次は10.10.16.0となり、その一つ前の10.10.15.255がブロードキャストアドレスになる。
ブロードキャストアドレス：10.10.15.255

2. Officeのサブネット設計
要件：1000hosts
　　↓
2^n-2≥1000
2^n≥1002
n=10(2^10=1024)
サブネットマスクは、32-10=22で/22で設計すればいい
Factoryで10.10.0.0/20(10.10.0.0~10.10.15.255)を使用したので、次のネットワークアドレスは10.10.16.0
なのでネットワークアドレスは10.10.16.0/22

# ブロードキャストアドレスの計算:
# (1) 正攻法: ホスト部のビット(32-22=10bit)を全て1にする。
#     10.10.00010011.11111111 -> 10.10.19.255
# (2) 暗算テク（ブロックサイズから計算）:
# /22は第3オクテット(24bit)までの範囲なので、24-22=2。2^2=4が第3オクテットのブロックサイズ。
# Factoryで10.10.15.255まで使用済みのため、ネットワークアドレスは16から始まり、4ずつ増える(16, 20, 24..)。
# よって10.10.16.0の次は10.10.20.0となり、その一つ前の10.10.19.255がブロードキャストアドレスになる。
ブロードキャストアドレス：10.10.19.255

3. Labのサブネット設計
要件：120hosts
　　↓
2^n-2≥120
2^n≥122
n=7(2^7=128)
サブネットマスクは、32-7=25で/25で設計すればいい
Officeで10.10.16.0/22(10.10.16.0~10.10.19.255)を使用したので、次のネットワークアドレスは10.10.20.0
なのでネットワークアドレスは10.10.20.0/25

# ブロードキャストアドレスの計算:
# (1) 正攻法: ホスト部のビット(32-25=7bit)を全て1にする。
#     10.10.20.01111111 -> 10.10.20.127
# (2) 暗算テク（ブロックサイズから計算）:
# /25は第4オクテット(32bit)までの範囲なので、32-25=7。2^7=128が第4オクテットのブロックサイズ。
# Officeで10.10.19.255まで使用済みのため、ネットワークアドレスは10.10.20.0から始まり、128ずつ増える(0, 128, ..)。
# よって10.10.20.0の次は10.10.20.128となり、その一つ前の10.10.20.127がブロードキャストアドレスになる。
ブロードキャストアドレス：10.10.20.127

4. Linkのサブネット設計
要件：2hosts
　　↓
2^n-2≥2
2^n≥4
n=2(2^2=4)
サブネットマスクは、32-2=30で/30で設計すればいい
Labで10.10.20.0/25(10.10.20.0~10.10.20.127)を使用したので、次のネットワークアドレスは10.10.20.128
なのでネットワークアドレスは10.10.20.128/30

# ブロードキャストアドレスの計算:
# (1) 正攻法: ホスト部のビット(32-30=2bit)を全て1にする。
#     10.10.20.10000011 -> 10.10.20.131
# (2) 暗算テク（ブロックサイズから計算）:
# /30は第4オクテット(32bit)までの範囲なので、32-30=2。2^2=4が第4オクテットのブロックサイズ。
# ネットワークアドレスは128から始まり、4ずつ増える(128, 132, ..)。
# よって10.10.20.128の次は10.10.20.132となり、その一つ前の10.10.20.131がブロードキャストアドレスになる。
ブロードキャストアドレス：10.10.20.131
